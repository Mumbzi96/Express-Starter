<script>
    //a function to search in the table and filter all the tables
    const search = () => {
        let input, filter, table, tr, td, txtValue, counter;
        input = document.getElementById("search")
        filter = input.value.toUpperCase();
        table = document.getElementsByTagName('table')[0]
        tbody = table.getElementsByTagName('tbody')[0]
        for(let i=0; i<tbody.getElementsByTagName('tr').length;i++){
            tr = tbody.getElementsByTagName('tr')[i]

            counter = 0;
            for(let j=0; j<tr.getElementsByTagName('td').length-3;j++){
                td = tr.getElementsByTagName('td')[j]
                txtValue = td.value || td.innerText
                
                if(txtValue.toUpperCase().indexOf(filter)>-1){
                    counter ++;
                }
            }
            if(counter>0){
                tr.style.display = ""
            }else{
                tr.style.display = "none";
            }
        }
    }

    // Confirm for Deleting
    const deleteConfirm = (id) => {
        let deleteButton = document.getElementById(`del${id}`)
        let message = language === "English" ? 'Are You Sure you want to delete this research?' : "هل أنت متأكد أنك تريد حذف هذا البحث؟"
        if(confirm("هل أنت متأكد أنك تريد حذف هذا البحث؟")){
            location.href = `/researches/delete/${id}`
        }
    }

    // Confirm for Archive
    const archiveConfirm = (id) => {
        let archiveButton = document.getElementById(`archive${id}`)
        let message = language === "English" ? 'Are You Sure you want to archive this research?' : "هل أنت متأكد أنك تريد أرشفة هذا البحث؟"
        if(confirm(message)){
            location.href = `/researches/archive/${id}`
        }
    }

    if("{{alert}}"){
        document.getElementById('error').style.backgroundColor = 'rgba(255, 0, 0, 0.7)'
        setTimeout(() => {
            document.getElementById('error').style.display= 'none';
        }, 5000);
    }

</script>